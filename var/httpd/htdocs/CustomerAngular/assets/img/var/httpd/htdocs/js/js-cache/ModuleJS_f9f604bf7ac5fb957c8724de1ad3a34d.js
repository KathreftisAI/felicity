"use strict";var Core=Core||{};Core.Installer=(function(TargetNS){function CheckDBDataCallback(json){if(parseInt(json.Successful,10)<1){$('#FormDBResultMessage').html(json.Message);$('#FormDBResultComment').html(json.Comment);$('fieldset.ErrorMsg').show();$('fieldset.Success').hide();}
else{$('#ButtonCheckDB').closest('.Field').hide();$('#FormDBSubmit').removeAttr('disabled').removeClass('Disabled');$('fieldset.ErrorMsg, fieldset.CheckDB').hide();$('fieldset.HideMe, div.HideMe, fieldset.Success').show();}}
TargetNS.CheckDBData=function(){var Data;$('input[name=Subaction]').val('CheckRequirements');Data=Core.AJAX.SerializeForm($('#FormDB'));Data+='CheckMode=DB;';Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,CheckDBDataCallback);$('input[name=Subaction]').val('DBCreate');};TargetNS.SelectOutboundMailType=function(obj){var value=$(obj).val();if(value!=="sendmail"){$('#InfoSMTP').show();}
else{$('#InfoSMTP, #InfoSMTPAuth').hide().find('input[name=SMTPAuth]').prop('checked',false);}
$('#OutboundMailDefaultPorts').val($('#OutboundMailType').val());$('#SMTPPort').val($('#OutboundMailDefaultPorts :selected').text());};TargetNS.CheckSMTPAuth=function(obj){if($(obj).is(':checked')){$('#InfoSMTPAuth').show().find('input').removeAttr('disabled');}
else{$('#InfoSMTPAuth input').attr('disabled','disabled').val("");$('#InfoSMTPAuth').hide();}};TargetNS.SkipMailConfig=function(){$('input[name=Skip]').val('1');$('input[name=Subaction]').val('Finish');$('form').submit();};function CheckMailConfigCallback(json){if(parseInt(json.Successful,10)===1){alert(Core.Config.Get('Installer.CheckMailLabelOne'));$('fieldset.errormsg').hide();$('input[name=Subaction]').val('Finish');$('form').submit();}
else{$('#FormMailResultMessage').html(json.Message);$('fieldset.ErrorMsg').show();alert(Core.Config.Get('Installer.CheckMailLabelTwo'));}}
TargetNS.CheckMailConfig=function(){var Data;$('input[name=Skip]').val('0');$('input[name=Subaction]').val('CheckRequirements');Data=Core.AJAX.SerializeForm($('#FormMail'));Data+='CheckMode=Mail;';Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,CheckMailConfigCallback);};return TargetNS;}(Core.Installer||{}));

